{"version":3,"sources":["webpack:///./src/components/catalog/catalog.jsx","webpack:///./src/components/cities/cities.jsx","webpack:///./src/components/city-link/city-link.jsx","webpack:///./src/components/main-empty/main-empty.jsx","webpack:///./src/components/main-page/main-page.jsx","webpack:///./src/components/option/option.jsx","webpack:///./src/components/select/select.jsx","webpack:///./src/hocs/with-select/with-select.js"],"names":["Catalog","props","currentCity","offers","coordinates","currentOffer","cities","length","SortOptions","propTypes","PropTypes","string","isRequired","array","sortOffers","sort","type","TypeSort","TO_HIGH","current","next","price","TO_LOW","TOP_RATED","rating","mapStateToProps","state","getFilteredOffers","typeSort","getTypeSort","getCurrentCity","map","it","location","latitude","longitude","getSelectedOffer","getCitiesFromServer","connect","Cities","_onSetCity","bind","city","onChangeCity","PureComponent","func","mapDispatchToProps","dispatch","ActionCreators","setCity","CityLink","_handleClickCity","evt","preventDefault","ownProps","Object","assign","MainEmpty","selectedCity","Constants","CITIES","MainPage","pageClass","Option","_handleOptionClick","_handleKeyDownEnter","value","name","onSetTypeSort","onSelectOption","onFocusButton","keyCode","KeyCode","ENTER","isSelected","bool","setSortType","Select","_handleClickDocumentOutside","_onFocusButton","dropdown","React","createRef","button","window","addEventListener","removeEventListener","contains","target","isOpen","onCloseDropdown","focus","onOpenDropdown","selected","options","selectedName","onKeyDownCloseDropdown","option","arrayOf","shape","withSelect","Component","WithSelect","_handleButtonClick","_handleDocumentKeyDownEsc","_onSelectOption","_closeDropdown","POPULAR","nameSelected","setState","ESC","currentState","selectList"],"mappings":"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","file":"5.bundle.js","sourcesContent":["import React, {Fragment} from \"react\";\nimport PropTypes from \"prop-types\";\nimport {connect} from \"react-redux\";\n\nimport {TypeSort, SortOptions} from \"../../constants\";\nimport {\n  getCurrentCity,\n  getFilteredOffers,\n  getSelectedOffer,\n  getTypeSort,\n  getCitiesFromServer,\n} from \"../../reducer/data/selectors\";\n\nimport Map from \"../map/map.jsx\";\nimport Sorter from \"./../select/select.jsx\";\nimport Cities from \"../cities/cities.jsx\";\nimport Offers from \"../offers/offers.jsx\";\nimport MainEmpty from \"./../main-empty/main-empty.jsx\";\n\nexport const Catalog = (props) => {\n  const {\n    currentCity,\n    offers,\n    coordinates,\n    currentOffer,\n    cities,\n  } = props;\n\n  return (\n    <Fragment>\n      {\n        offers.length !== 0 ?\n          <main className=\"page__main page__main--index\">\n            <h1 className=\"visually-hidden\">Cities</h1>\n            <div className=\"cities tabs\">\n              <Cities cities={cities}/>\n            </div>\n            <div className=\"cities__places-wrapper\">\n              <div className=\"cities__places-container container\">\n                <section className=\"cities__places places\">\n                  <h2 className=\"visually-hidden\">Places</h2>\n                  <b className=\"places__found\" role=\"status\" aria-live=\"polite\">{offers.length} places to stay in {currentCity}</b>\n                  <form className=\"places__sorting\" action=\"#\" method=\"get\">\n                    <span className=\"places__sorting-caption\">Sort by</span>\n                    <Sorter options={SortOptions}/>\n                  </form>\n                  <Offers offers={offers} classModOffers={[`cities__places-list`, `tabs__content`]}/>\n                </section>\n                <div className=\"cities__right-section\">\n                  <section className=\"cities__map map\">\n                    <Map selectedOffer={currentOffer} currentCity={currentCity} coordinates={coordinates}/>\n                  </section>\n                </div>\n              </div>\n            </div>\n          </main>\n          : <MainEmpty selectedCity={currentCity}/>\n      }\n    </Fragment>\n  );\n};\n\nCatalog.propTypes = {\n  currentCity: PropTypes.string.isRequired,\n  offers: PropTypes.array.isRequired,\n  coordinates: PropTypes.array.isRequired,\n  currentOffer: PropTypes.array,\n  cities: PropTypes.array.isRequired,\n};\n\nconst sortOffers = (offers, sort) => {\n  switch (sort.type) {\n    case (TypeSort.TO_HIGH):\n      return [...offers].sort((current, next) => current.price - next.price);\n    case (TypeSort.TO_LOW):\n      return [...offers].sort((current, next) => next.price - current.price);\n    case (TypeSort.TOP_RATED):\n      return [...offers].sort((current, next) => next.rating - current.rating);\n    default:\n      return offers;\n  }\n};\n\nconst mapStateToProps = (state) => {\n  const offers = getFilteredOffers(state);\n  const typeSort = getTypeSort(state);\n\n  return {\n    currentCity: getCurrentCity(state),\n    offers: sortOffers(offers, typeSort),\n    coordinates: offers.map((it) => [it.location.latitude, it.location.longitude]),\n    currentOffer: getSelectedOffer(state),\n    cities: getCitiesFromServer(state),\n  };\n};\n\nexport default connect(mapStateToProps)(Catalog);\n","import React, {PureComponent} from \"react\";\nimport PropTypes from \"prop-types\";\nimport {connect} from \"react-redux\";\n\nimport {ActionCreators} from \"../../reducer/data/data\";\nimport City from \"../city-link/city-link.jsx\";\n\nexport class Cities extends PureComponent {\n  constructor(props) {\n    super(props);\n    this._onSetCity = this._onSetCity.bind(this);\n  }\n\n  _onSetCity(city) {\n    const {onChangeCity} = this.props;\n\n    onChangeCity(city);\n  }\n\n  render() {\n    const {cities} = this.props;\n\n    return (\n      <section className=\"locations container\">\n        <ul className=\"locations__list tabs__list\">\n          {cities.map((city) => <City\n            key={city}\n            city={city}\n            onChangeCity={this._onSetCity}\n          />)}\n        </ul>\n      </section>\n    );\n  }\n}\n\nCities.propTypes = {\n  cities: PropTypes.array.isRequired,\n  onChangeCity: PropTypes.func.isRequired\n};\n\nconst mapDispatchToProps = (dispatch) => ({\n  onChangeCity: (city) => dispatch(ActionCreators.setCity(city)),\n});\n\nexport default connect(null, mapDispatchToProps)(Cities);\n","import React, {PureComponent} from \"react\";\nimport PropTypes from \"prop-types\";\nimport {connect} from \"react-redux\";\n\nimport {getCurrentCity} from \"./../../reducer/data/selectors\";\n\nexport class CityLink extends PureComponent {\n  constructor(props) {\n    super(props);\n\n    this._handleClickCity = this._handleClickCity.bind(this);\n  }\n\n  _handleClickCity(evt) {\n    const {onChangeCity, city} = this.props;\n\n    evt.preventDefault();\n    onChangeCity(city);\n  }\n\n  render() {\n    const {city, currentCity} = this.props;\n\n    return (\n      <li className=\"locations__item\">\n        <button type=\"button\"\n          onClick={this._handleClickCity}\n          className={`locations__item-link tabs__item ${currentCity === city ? `tabs__item--active` : ``}`}\n        >\n          <span>{city}</span>\n        </button>\n      </li>\n    );\n  }\n}\n\nCityLink.propTypes = {\n  city: PropTypes.string.isRequired,\n  onChangeCity: PropTypes.func.isRequired,\n  currentCity: PropTypes.string\n};\n\n\nconst mapStateToProps = (state, ownProps) => Object.assign({}, ownProps, {\n  currentCity: getCurrentCity(state),\n});\n\nexport default connect(mapStateToProps)(CityLink);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Constants from \"../../constants\";\n\nimport Cities from \"../cities/cities.jsx\";\n\nconst MainEmpty = ({selectedCity}) => {\n  return (\n    <main className=\"page__main page__main--index page__main--index-empty\">\n      <h1 className=\"visually-hidden\">Cities</h1>\n      <div className=\"cities tabs\">\n        <Cities cities={Constants.CITIES} />\n      </div>\n      <div className=\"cities__places-wrapper\">\n        <div className=\"cities__places-container cities__places-container--empty container\">\n          <section className=\"cities__no-places\">\n            <div className=\"cities__status-wrapper tabs__content\">\n              <b className=\"cities__status\">No places to stay available</b>\n              <p className=\"cities__status-description\">We could not find any property available at the moment in {selectedCity}</p>\n            </div>\n          </section>\n          <div className=\"cities__right-section\">\n          </div>\n        </div>\n      </div>\n    </main>\n  );\n};\n\nMainEmpty.propTypes = {\n  selectedCity: PropTypes.string.isRequired,\n};\n\nexport default MainEmpty;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport Catalog from \"./../catalog/catalog.jsx\";\nimport Layout from \"../layout/layout.jsx\";\n\nconst MainPage = () =>{\n  return (\n    <Layout title={`Six cities`} pageClasses={[`page`, `page--gray`, `page--main`]}>\n      <Catalog/>\n    </Layout>\n  );\n};\n\nMainPage.propTypes = {\n  pageClass: PropTypes.string,\n};\n\nexport default MainPage;\n\n","import React, {PureComponent} from \"react\";\nimport PropTypes from \"prop-types\";\nimport {connect} from \"react-redux\";\n\nimport {ActionCreators} from \"./../../reducer/data/data\";\nimport {KeyCode} from \"./../../constants\";\n\nexport class Option extends PureComponent {\n  constructor(props) {\n    super(props);\n\n    this._handleOptionClick = this._handleOptionClick.bind(this);\n    this._handleKeyDownEnter = this._handleKeyDownEnter.bind(this);\n  }\n\n  _handleOptionClick() {\n    const {\n      value,\n      name,\n      onSetTypeSort,\n      onSelectOption,\n      onFocusButton,\n    } = this.props;\n\n    onSelectOption(value, name);\n    onSetTypeSort(value);\n    onFocusButton();\n  }\n\n  _handleKeyDownEnter(evt) {\n    const {\n      onFocusButton,\n      name,\n      value,\n      onSelectOption,\n      onSetTypeSort,\n    } = this.props;\n\n    if (evt.keyCode === KeyCode.ENTER) {\n      onSelectOption(value, name);\n      onSetTypeSort(value);\n      onFocusButton();\n    }\n  }\n\n  render() {\n    const {isSelected, value, name} = this.props;\n\n    return (\n      <li\n        className={`${isSelected ? `places__option--active` : ``} places__option`}\n        onKeyDown={this._handleKeyDownEnter}\n        onClick={this._handleOptionClick}\n        tabIndex=\"0\"\n        data-value={value}\n      >\n        {name}\n      </li>\n    );\n  }\n}\n\nOption.propTypes = {\n  value: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired,\n  isSelected: PropTypes.bool.isRequired,\n  onSetTypeSort: PropTypes.func.isRequired,\n  onSelectOption: PropTypes.func.isRequired,\n  onFocusButton: PropTypes.func.isRequired,\n};\n\nconst mapDispatchToProps = (dispatch) => ({\n  onSetTypeSort: (value) => dispatch(ActionCreators.setSortType(value)),\n});\n\nexport default connect(null, mapDispatchToProps)(Option);\n","import React, {PureComponent} from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport withSelect from \"./../../hocs/with-select/with-select\";\nimport Option from \"./../option/option.jsx\";\n\nexport class Select extends PureComponent {\n  constructor(props) {\n    super(props);\n\n    this._handleClickDocumentOutside = this._handleClickDocumentOutside.bind(this);\n    this._onFocusButton = this._onFocusButton.bind(this);\n\n    this.dropdown = React.createRef();\n    this.button = React.createRef();\n  }\n\n  componentDidMount() {\n    window.addEventListener(`click`, this._handleClickDocumentOutside);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(`click`, this._handleClickDocumentOutside);\n  }\n\n  _handleClickDocumentOutside(evt) {\n    const dropdown = this.dropdown.current.contains(evt.target);\n    const button = this.button.current.contains(evt.target);\n    const {isOpen, onCloseDropdown} = this.props;\n\n    if (isOpen && !dropdown && !button) {\n      onCloseDropdown();\n    }\n  }\n\n  _onFocusButton() {\n    this.button.current.focus();\n  }\n\n  render() {\n    const {\n      onOpenDropdown,\n      isOpen,\n      selected,\n      onSelectOption,\n      options,\n      selectedName,\n      onKeyDownCloseDropdown,\n    } = this.props;\n\n    return (\n      <React.Fragment>\n        <button type=\"button\"\n          className=\"places__sorting-type\"\n          onClick={onOpenDropdown}\n          aria-haspopup=\"true\"\n          aria-expanded={isOpen}\n          id=\"sorter\"\n          ref={this.button}\n        >\n          {selectedName}\n          <svg className=\"places__sorting-arrow\" width=\"7\" height=\"4\" aria-hidden=\"true\">\n            <use xlinkHref=\"#icon-arrow-select\"/>\n          </svg>\n        </button>\n        <ul\n          onKeyDown={onKeyDownCloseDropdown}\n          ref={this.dropdown}\n          aria-labelledby=\"sorter\"\n          className={`${isOpen ? `places__options--opened` : ``} places__options places__options--custom`}\n          tabIndex=\"-1\"\n        >\n          {options.map((option) => {\n            return <Option\n              onSelectOption={onSelectOption}\n              isSelected={selected === option.value}\n              onFocusButton={this._onFocusButton}\n              value={option.value}\n              name={option.name}\n              button={this.button}\n              key={option.value}\n            />;\n          })}\n        </ul>\n        <select defaultValue={selected} hidden id=\"places-sorting\">\n          <option value={selected}>{selectedName}</option>\n        </select>\n      </React.Fragment>\n    );\n  }\n}\n\nSelect.propTypes = {\n  onOpenDropdown: PropTypes.func.isRequired,\n  onSelectOption: PropTypes.func.isRequired,\n  onKeyDownCloseDropdown: PropTypes.func.isRequired,\n  isOpen: PropTypes.bool.isRequired,\n  selected: PropTypes.string.isRequired,\n  selectedName: PropTypes.string.isRequired,\n  options: PropTypes.arrayOf(PropTypes.shape({\n    value: PropTypes.string.isRequired,\n    selected: PropTypes.bool.isRequired,\n    name: PropTypes.string.isRequired,\n  })).isRequired,\n  onCloseDropdown: PropTypes.func.isRequired,\n};\n\nexport default withSelect(Select);\n","import React, {PureComponent} from \"react\";\n\nimport {TypeSort} from \"../../constants\";\nimport {KeyCode} from \"./../../constants\";\n\nconst withSelect = (Component) => {\n  class WithSelect extends PureComponent {\n    constructor(props) {\n      super(props);\n\n      this._handleButtonClick = this._handleButtonClick.bind(this);\n      this._handleDocumentKeyDownEsc = this._handleDocumentKeyDownEsc.bind(this);\n      this._onSelectOption = this._onSelectOption.bind(this);\n      this._closeDropdown = this._closeDropdown.bind(this);\n\n      this.state = {\n        isOpen: false,\n        selected: TypeSort.POPULAR,\n        nameSelected: `Popular`\n      };\n    }\n\n    _closeDropdown() {\n      this.setState({isOpen: false});\n    }\n\n    _handleButtonClick(evt) {\n      evt.preventDefault();\n      const {isOpen} = this.state;\n      this.setState({isOpen: !isOpen});\n    }\n\n    _handleDocumentKeyDownEsc(evt) {\n      if (evt.keyCode === KeyCode.ESC) {\n        this.setState({isOpen: false});\n      }\n    }\n\n    _onSelectOption(value, name) {\n      this.setState((currentState) => ({\n        isOpen: !currentState.isOpen,\n        selected: value,\n        nameSelected: name,\n      }));\n    }\n\n    render() {\n      const {selected, nameSelected} = this.state;\n\n      return (\n        <Component\n          {...this.props}\n          selectedName={nameSelected}\n          onOpenDropdown={this._handleButtonClick}\n          onKeyDownCloseDropdown={this._handleDocumentKeyDownEsc}\n          onCloseDropdown={this._closeDropdown}\n          onSelectOption={this._onSelectOption}\n          button={this.button}\n          dropdown={this.selectList}\n          isOpen={this.state.isOpen}\n          selected={selected}\n        />\n      );\n    }\n  }\n\n  return WithSelect;\n};\n\nexport default withSelect;\n"],"sourceRoot":""}